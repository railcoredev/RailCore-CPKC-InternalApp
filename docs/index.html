<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RailCore CPKC Worker App — v3.8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0b0f1a">
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <span class="rc-orange">RAIL</span><span class="rc-core">CORE</span>
      </div>
      <div class="subtitle">
        CPKC — CROSSINGS · SIDINGS · TRACK LENGTHS (WORKER)
      </div>
    </header>

    <main>
      <section class="control-panel">
        <!-- STATE(S) -->
        <label for="stateSelect" class="field-label">STATE(S)</label>
        <select id="stateSelect" class="field-multi" multiple></select>

        <!-- SUBDIVISION -->
        <label for="subdivisionSelect" class="field-label">SUBDIVISION</label>
        <select id="subdivisionSelect" class="field-select"></select>

        <!-- EMERGENCY CONTACT -->
        <div class="inline-row">
          <div class="inline-field">
            <label class="field-label">EMERGENCY CONTACT</label>
            <div class="ec-text">
              CPKC Emergency: <a href="tel:1-800-766-7912">1-800-766-7912</a>
            </div>
          </div>
        </div>

        <!-- SPACING + BUFFER -->
        <div class="inline-row">
          <div class="inline-field">
            <label for="spacingInput" class="field-label">SPACING (FT)</label>
            <input id="spacingInput" class="field-input" type="number" value="5500" min="0" step="100">
          </div>
          <div class="inline-field">
            <label for="bufferInput" class="field-label">BUFFER (FT)</label>
            <input id="bufferInput" class="field-input" type="number" value="400" min="0" step="50">
          </div>
        </div>

        <!-- VIEW MODE -->
        <label class="field-label">VIEW MODE</label>
        <div class="viewmode-row">
          <label><input type="radio" name="viewMode" value="threshold" checked> ≥ Threshold</label>
          <label><input type="radio" name="viewMode" value="all"> All</label>
        </div>

        <!-- BUTTONS -->
        <div class="button-row">
          <button id="applyBtn" class="btn primary">Apply</button>
          <button id="printBtn" class="btn">Print</button>
          <button id="downloadBtn" class="btn">Download</button>
        </div>
      </section>

      <!-- TABS -->
      <nav class="tabs">
        <div class="tab active" data-tab="crossings">Crossings</div>
        <div class="tab" data-tab="sidings">Sidings</div>
        <div class="tab" data-tab="tracks">Track Lengths</div>
      </nav>

      <!-- YARD (track lengths only) -->
      <section id="yardPanel" class="yard-panel hidden">
        <label for="yardSelect" class="field-label">YARD</label>
        <select id="yardSelect" class="field-select"></select>
      </section>

      <!-- RESULTS -->
      <section class="results-panel">
        <pre id="outputText" class="results-text"></pre>
      </section>

      <footer class="footer">
        <div class="version">RAILCORE CPKC WORKER APP — v3.8</div>
      </footer>
    </main>
  </div>

  <!-- DOWNLOAD OVERLAY -->
  <div id="downloadOverlay" class="download-overlay hidden">
    <div class="download-card">
      <div class="download-title">Download as:</div>
      <div class="download-buttons">
        <button data-format="txt" class="btn primary">TXT</button>
        <button data-format="csv" class="btn">CSV</button>
        <button data-format="pdf" class="btn">PDF</button>
        <button data-format="png" class="btn">PNG</button>
        <button data-format="cancel" class="btn secondary">Cancel</button>
      </div>
    </div>
  </div>

  <script src="data_loader.js"></script>
  <script src="app.js"></script>
</body>
</html>
